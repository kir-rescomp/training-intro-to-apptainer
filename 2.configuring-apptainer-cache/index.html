<!DOCTYPE html><html lang="en" class="no-js"><head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="The Kennedy Institute of Rheumatology, NDORMS, University of Oxford">
      
      
        <link rel="canonical" href="https://kir-rescomp.github.io/training-intro-to-apptainer/2.configuring-apptainer-cache/">
      
      
        <link rel="prev" href="../1.getting-started-with-containers/">
      
      
        <link rel="next" href="../3.apptainer_bind/">
      
      
        
      
      
      <link rel="icon" href="../images/kir_standalone_logo.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>2. Understanding and Configuring Apptainer Cache and Temporary Directories - Reproducible Research Using Containers</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.618322db.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Mukta:300,300i,400,400i,700,700i%7CFira+Code:400,400i,700,700i&amp;display=fallback">
        <style>:root{--md-text-font:"Mukta";--md-code-font:"Fira Code"}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
      <link rel="stylesheet" href="../stylesheets/catalogue-return-button.css">
    
      <link rel="stylesheet" href="../stylesheets/side_bar_menu.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  <link href="../assets/stylesheets/glightbox.min.css" rel="stylesheet"><script src="../assets/javascripts/glightbox.min.js"></script><style id="glightbox-style">
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color); }
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color); }
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color); }
        </style></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#2-understanding-and-configuring-apptainer-cache-and-temporary-directories" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Reproducible Research Using Containers" class="md-header__button md-logo" aria-label="Reproducible Research Using Containers" data-md-component="logo">
      
  <img src="../images/kir_oxford_combined_logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Reproducible Research Using Containers
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              2. Understanding and Configuring Apptainer Cache and Temporary Directories
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo" aria-label="Switch to light mode" type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"></path></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo" aria-label="Switch to dark mode" type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="custom" data-md-color-accent="indigo" aria-label="Switch to system preference" type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/kir-rescomp/training-intro-to-apptainer" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"></path></svg>
  </div>
  <div class="md-source__repository">
    kir-rescomp/training-intro-to-apptainer
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Reproducible Research Using Containers" class="md-nav__button md-logo" aria-label="Reproducible Research Using Containers" data-md-component="logo">
      
  <img src="../images/kir_oxford_combined_logo.png" alt="logo">

    </a>
    Reproducible Research Using Containers
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/kir-rescomp/training-intro-to-apptainer" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"></path></svg>
  </div>
  <div class="md-source__repository">
    kir-rescomp/training-intro-to-apptainer
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../1.getting-started-with-containers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    1. Getting Started with Containers
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    2. Understanding and Configuring Apptainer Cache and Temporary Directories
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    2. Understanding and Configuring Apptainer Cache and Temporary Directories
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#why-this-matters" class="md-nav__link">
    <span class="md-ellipsis">
      
        Why This Matters
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-are-these-directories" class="md-nav__link">
    <span class="md-ellipsis">
      
        What Are These Directories?
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="What Are These Directories?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#apptainer_cachedir-local-cache-directory" class="md-nav__link">
    <span class="md-ellipsis">
      
        APPTAINER_CACHEDIR (Local Cache Directory)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#apptainer_tmpdir-temporary-directory" class="md-nav__link">
    <span class="md-ellipsis">
      
        APPTAINER_TMPDIR (Temporary Directory)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setting-up-your-environment" class="md-nav__link">
    <span class="md-ellipsis">
      
        Setting Up Your Environment
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Setting Up Your Environment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#environment-variable-method-recommended" class="md-nav__link">
    <span class="md-ellipsis">
      
        Environment Variable Method (Recommended)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#symlink-method" class="md-nav__link">
    <span class="md-ellipsis">
      
        Symlink Method
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cleaning-the-apptainer-image-cache" class="md-nav__link">
    <span class="md-ellipsis">
      
        ðŸ§¹ Cleaning the Apptainer image cache
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../3.apptainer_bind/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    3. Apptainer Bind: Sharing Data Between Host and Container
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../4.apptainer_image_pull_build/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    4. Apptainer Image Pull and Build
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../5.running_a_container_interactive_and_slurm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    5. Running a container, both interactively and via Slurm
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#why-this-matters" class="md-nav__link">
    <span class="md-ellipsis">
      
        Why This Matters
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-are-these-directories" class="md-nav__link">
    <span class="md-ellipsis">
      
        What Are These Directories?
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="What Are These Directories?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#apptainer_cachedir-local-cache-directory" class="md-nav__link">
    <span class="md-ellipsis">
      
        APPTAINER_CACHEDIR (Local Cache Directory)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#apptainer_tmpdir-temporary-directory" class="md-nav__link">
    <span class="md-ellipsis">
      
        APPTAINER_TMPDIR (Temporary Directory)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setting-up-your-environment" class="md-nav__link">
    <span class="md-ellipsis">
      
        Setting Up Your Environment
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Setting Up Your Environment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#environment-variable-method-recommended" class="md-nav__link">
    <span class="md-ellipsis">
      
        Environment Variable Method (Recommended)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#symlink-method" class="md-nav__link">
    <span class="md-ellipsis">
      
        Symlink Method
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cleaning-the-apptainer-image-cache" class="md-nav__link">
    <span class="md-ellipsis">
      
        ðŸ§¹ Cleaning the Apptainer image cache
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="2-understanding-and-configuring-apptainer-cache-and-temporary-directories">2. Understanding and Configuring Apptainer Cache and Temporary Directories<a class="headerlink" href="#2-understanding-and-configuring-apptainer-cache-and-temporary-directories" title="Permanent link">Â¶</a></h1>
<h2 id="why-this-matters">Why This Matters<a class="headerlink" href="#why-this-matters" title="Permanent link">Â¶</a></h2>
<p>By default, Apptainer will attempt to use your home directory for all operations, creating a hidden directory <code>~/.apptainer</code> for this purpose. Since home directories are limited to 20GB, we recommend redirecting these operations to the nobackup filesystem to avoid quota issues.</p>
<h2 id="what-are-these-directories">What Are These Directories?<a class="headerlink" href="#what-are-these-directories" title="Permanent link">Â¶</a></h2>
<h3 id="apptainer_cachedir-local-cache-directory"><code>APPTAINER_CACHEDIR</code> (Local Cache Directory)<a class="headerlink" href="#apptainer_cachedir-local-cache-directory" title="Permanent link">Â¶</a></h3>
<p>This is where Apptainer stores downloaded container images, layers, and other reusable components. When you pull a container image from a registry (like Docker Hub or Sylabs Cloud), Apptainer downloads and caches the image layers here. The cache helps speed up subsequent operations by avoiding redundant downloads. Over time, this directory can grow significantly, especially if you work with multiple large container images.</p>
<h3 id="apptainer_tmpdir-temporary-directory"><code>APPTAINER_TMPDIR</code> (Temporary Directory)<a class="headerlink" href="#apptainer_tmpdir-temporary-directory" title="Permanent link">Â¶</a></h3>
<p>This directory is used for temporary files during container build and execution operations. Apptainer uses this space for:</p>
<ul>
<li>Unpacking and assembling container layers</li>
<li>Storing temporary files during container builds</li>
<li>Managing overlay filesystems when running containers</li>
<li>Other transient operations that require scratch space</li>
</ul>
<p>These temporary files are typically cleaned up after operations complete, but the directory can require substantial space during active operations, particularly when building large containers.</p>
<h2 id="setting-up-your-environment">Setting Up Your Environment<a class="headerlink" href="#setting-up-your-environment" title="Permanent link">Â¶</a></h2>
<p>To configure Apptainer to use  filesystem other than your home directory, set the following environment variables before running Apptainer.</p>
<h3 id="environment-variable-method-recommended">Environment Variable Method (Recommended)<a class="headerlink" href="#environment-variable-method-recommended" title="Permanent link">Â¶</a></h3>
<p>We recommend using <code>scratch</code> file system (<code>/gpfs3/well/kir/scratch/group</code>) for both cache and temporary. </p>
<div class="admonition terminal">
<p class="admonition-title">code</p>
<ol>
<li>create a dedicated directory for yourself on scrach ( make sure to replace <code>group</code> with your research group)
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>mkdir<span class="w"> </span>-p<span class="w"> </span>/gpfs3/well/kir/scratch/group/<span class="nv">$USER_apptainer_cache</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="nb">export</span><span class="w"> </span><span class="nv">APPTAINER_CACHEDIR</span><span class="o">=</span><span class="s2">"/gpfs3/well/kir/scratch/group/</span><span class="nv">$USER_apptainer_cache</span><span class="s2">"</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="nb">export</span><span class="w"> </span><span class="nv">APPTAINER_TMPDIR</span><span class="o">=</span><span class="si">${</span><span class="nv">APPTAINER_CACHEDIR</span><span class="si">}</span>
</code></pre></div></li>
</ol>
</div>
<div class="admonition tent-arrow-down">
<p class="admonition-title">Making Changes Permanent</p>
<p>We recommend adding these environment variables to your <code>~/.bashrc</code> file so they're automatically set for all future sessions. This ensures consistent behavior and prevents accidentally filling up your home directory quota.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="nb">echo</span><span class="w"> </span><span class="s1">'export APPTAINER_CACHEDIR="/gpfs3/well/kir/scratch/group/$USER_apptainer_cache"'</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>~/.bashrc
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="nb">echo</span><span class="w"> </span><span class="s1">'export APPTAINER_TMPDIR=${APPTAINER_CACHEDIR}'</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>~/.bashrc
</code></pre></div>
</div>
<h3 id="symlink-method">Symlink Method<a class="headerlink" href="#symlink-method" title="Permanent link">Â¶</a></h3>
<p>Alternatively you can use <code>symlink</code> for to create a soft link to the scratch</p>
<div class="admonition terminal">
<p class="admonition-title">code</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="c1"># Create apptainer cache folder</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>mkdir<span class="w"> </span>-p<span class="w"> </span>/gpfs3/well/kir/scratch/group/<span class="nv">$USER_apptainer_cache</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="c1"># symlinking</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>ln<span class="w"> </span>-s<span class="w"> </span>/gpfs3/well/kir/scratch/group/<span class="nv">$USER_apptainer</span><span class="w"> </span>.apptainer
</code></pre></div>
</div>
<h2 id="cleaning-the-apptainer-image-cache">ðŸ§¹ Cleaning the Apptainer image cache<a class="headerlink" href="#cleaning-the-apptainer-image-cache" title="Permanent link">Â¶</a></h2>
<p>We can remove container images from the cache using the <code>apptainer cache clean</code> command. Running the command without any options will display a warning and ask you to confirm that you want to remove everything from your cache.</p>
<div class="admonition quote">
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>$<span class="w">  </span>apptainer<span class="w"> </span>cache<span class="w"> </span>clean
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>This<span class="w"> </span>will<span class="w"> </span>delete<span class="w"> </span>everything<span class="w"> </span><span class="k">in</span><span class="w"> </span>your<span class="w"> </span>cache<span class="w"> </span><span class="o">(</span>containers<span class="w"> </span>from<span class="w"> </span>all<span class="w"> </span>sources<span class="w"> </span>and<span class="w"> </span>OCI<span class="w"> </span>blobs<span class="o">)</span>.
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>Hint:<span class="w"> </span>You<span class="w"> </span>can<span class="w"> </span>see<span class="w"> </span>exactly<span class="w"> </span>what<span class="w"> </span>would<span class="w"> </span>be<span class="w"> </span>deleted<span class="w"> </span>by<span class="w"> </span>canceling<span class="w"> </span>and<span class="w"> </span>using<span class="w"> </span>the<span class="w"> </span>--dry-run<span class="w"> </span>option.
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>Do<span class="w"> </span>you<span class="w"> </span>want<span class="w"> </span>to<span class="w"> </span><span class="k">continue</span>?<span class="w"> </span><span class="o">[</span>y/N<span class="o">]</span><span class="w"> </span>y
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>INFO:<span class="w">    </span>Removing<span class="w"> </span>blob<span class="w"> </span>cache<span class="w"> </span>entry:<span class="w"> </span>blobs
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>INFO:<span class="w">    </span>Removing<span class="w"> </span>blob<span class="w"> </span>cache<span class="w"> </span>entry:<span class="w"> </span>index.json
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a>INFO:<span class="w">    </span>Removing<span class="w"> </span>blob<span class="w"> </span>cache<span class="w"> </span>entry:<span class="w"> </span>oci-layout
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a>INFO:<span class="w">    </span>No<span class="w"> </span>cached<span class="w"> </span>files<span class="w"> </span>to<span class="w"> </span>remove<span class="w"> </span>at<span class="w"> </span>/gpfs3/well/kir-scratch/sansom/mat611-apptainer-cache/cache/library
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a>INFO:<span class="w">    </span>Removing<span class="w"> </span>oci-tmp<span class="w"> </span>cache<span class="w"> </span>entry:<span class="w"> </span>21fa01d221dc3926f97e47a50ad2ad9550680d10f504583e5069777b30983832
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a>INFO:<span class="w">    </span>No<span class="w"> </span>cached<span class="w"> </span>files<span class="w"> </span>to<span class="w"> </span>remove<span class="w"> </span>at<span class="w"> </span>/gpfs3/well/kir-scratch/sansom/mat611-apptainer-cache/cache/shub
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a>INFO:<span class="w">    </span>No<span class="w"> </span>cached<span class="w"> </span>files<span class="w"> </span>to<span class="w"> </span>remove<span class="w"> </span>at<span class="w"> </span>/gpfs3/well/kir-scratch/sansom/mat611-apptainer-cache/cache/oras
<a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a>INFO:<span class="w">    </span>No<span class="w"> </span>cached<span class="w"> </span>files<span class="w"> </span>to<span class="w"> </span>remove<span class="w"> </span>at<span class="w"> </span>/gpfs3/well/kir-scratch/sansom/mat611-apptainer-cache/cache/net
</code></pre></div>
<ul>
<li>You can also remove specific container images or all container images of a particular type. Look at the output of <code>apptainer cache clean --help</code> for more information.</li>
</ul>
</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer">
        
          
          <a href="../1.getting-started-with-containers/" class="md-footer__link md-footer__link--prev" aria-label="Previous: 1. Getting Started with Containers">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                1. Getting Started with Containers
              </div>
            </div>
          </a>
        
        
          
          <a href="../3.apptainer_bind/" class="md-footer__link md-footer__link--next" aria-label="Next: 3. Apptainer Bind: Sharing Data Between Host and Container">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                3. Apptainer Bind: Sharing Data Between Host and Container
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"></path></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      KIR "Reproducible research using containers-Introduction to Apptainer" is licensed under a <a rel="noopener" target="_blank" href="https://www.gnu.org/licenses/gpl-3.0.en.html">GNU General Public License v3.0</a>
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": ["navigation.tracking", "navigation.sections", "navigation.expand", "navigation.top", "navigation.footer", "content.code.copy", "content.code.annotate"], "search": "../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
        <script src="../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  
<script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(()=>{ lightbox.reload(); });
</script></body></html>